async function searchTracks() {
  const query = document.getElementById("searchInput").value.trim();
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "üîç ƒêang t√¨m...";

  if (!query) {
    resultsDiv.innerHTML = "‚ùå Vui l√≤ng nh·∫≠p t·ª´ kh√≥a.";
    return;
  }

  try {
    const response = await fetch(`https://api.deezer.com/search?q=${encodeURIComponent(query)}&output=jsonp`, {
      mode: 'no-cors'
    });

    // Deezer d√πng JSONP n√™n fetch th√¥ng th∆∞·ªùng s·∫Ω kh√¥ng parse ƒë∆∞·ª£c
    // S·ª≠ d·ª•ng JSONP b·∫±ng c√°ch t·∫°o <script> tag th·ªß c√¥ng:

    const script = document.createElement("script");
    const callbackName = "deezerCallback_" + Date.now();

    window[callbackName] = function (data) {
      if (!data || !data.data || data.data.length === 0) {
        resultsDiv.innerHTML = "‚ùå Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.";
        return;
      }

      resultsDiv.innerHTML = "";
      data.data.slice(0, 5).forEach(track => {
        const div = document.createElement("div");
        div.className = "track";
        div.innerHTML = `
          <strong>${track.title}</strong> - ${track.artist.name}<br/>
          <img src="${track.album.cover_medium}" alt="cover"/><br/>
          <audio controls src="${track.preview}"></audio>
        `;
        resultsDiv.appendChild(div);
      });

      delete window[callbackName];
      script.remove();
    };

    script.src = `https://api.deezer.com/search?q=${encodeURIComponent(query)}&output=jsonp&callback=${callbackName}`;
    document.body.appendChild(script);

  } catch (error) {
    resultsDiv.innerHTML = "‚ö†Ô∏è C√≥ l·ªói x·∫£y ra khi g·ªçi API.";
    console.error(error);
  }
}
